<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>JS CSGO</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>


        <div class="keys">
            <div data-key="65" class="key">
                <kbd>A</kbd>
                <span class="sound">glock</span>
            </div>
            <div data-key="83" class="key">
                <kbd>S</kbd>
                <span class="sound">usp</span>
            </div>
            <div data-key="68" class="key">
                <kbd>D</kbd>
                <span class="sound">deagle</span>
            </div>
            <div data-key="70" class="key">
                <kbd>F</kbd>
                <span class="sound">ump45</span>
            </div>
            <div data-key="71" class="key">
                <kbd>G</kbd>
                <span class="sound">mac10</span>
            </div>
            <div data-key="72" class="key">
                <kbd>H</kbd>
                <span class="sound">galil</span>
            </div>
            <div data-key="74" class="key">
                <kbd>J</kbd>
                <span class="sound">ak47</span>
            </div>
            <div data-key="75" class="key">
                <kbd>K</kbd>
                <span class="sound">scout</span>
            </div>
            <div data-key="76" class="key">
                <kbd>L</kbd>
                <span class="sound">awp</span>
            </div>
        </div>
        <div class="buy">
            <div data-key="66" class="buy-button">
                <kbd>B</kbd>
                <span class="sound"></span>
            </div>
        </div>

        <audio data-key="65" src="weapons (updated)/glock18/glock_01.wav"></audio>
        <audio data-key="83" src="weapons (updated)/usp/usp_01.wav"></audio>
        <audio data-key="68" src="weapons (updated)/deagle/deagle_01.wav"></audio>
        <audio data-key="70" src="weapons (updated)/ump45/ump45_02.wav"></audio>
        <audio data-key="71" src="weapons (updated)/mac10/mac10_01.wav"></audio>
        <audio data-key="72" src="weapons (updated)/galilar/galil_01.wav"></audio>
        <audio data-key="74" src="weapons (updated)/ak47/ak47_01.wav"></audio>
        <audio data-key="75" src="weapons (updated)/ssg08/ssg08_01.wav"></audio>
        <audio data-key="76" src="weapons (updated)/awp/awp_01.wav"></audio>
        <script>
        function playSound(e) {
  const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
  const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
  if (!audio) return; // stop the function from running all together
  audio.currentTime = 0; // rewind to the start
  audio.play();
  key.classList.add('playing');
}

// window.addEventListener('keydown', (e) => {
//   const buyButton = document.querySelector(
//     `.buy-button[data-key="${e.keyCode}"]`
//   );
//   console.log(buyButton);
// });
// when you click B it opens up a modal thats transparent which allows you to select other weapons and swap them out for the ones already selected, use esc or click 'X' to exit buy menu.

function removeTransition(e) {
  if (e.propertyName !== 'transform') return; // skip it if its not a transform
  this.classList.remove('playing');
}

const keys = document.querySelectorAll('.key');
keys.forEach((key) => key.addEventListener('transitionend', removeTransition));
window.addEventListener('keydown', playSound);
</script>
    </body>
</html>